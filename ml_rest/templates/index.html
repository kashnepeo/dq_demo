<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>NHN Diquest. ML/DL REST API Tester</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'swagger-ui.css') }}">
    <link rel="icon" type="image/png" href="" sizes="64x64 32x32 16x16"/>
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename = 'image/favicon.ico') }}">
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        body {
            margin: 0;
            background: #fafafa;
        }
    </style>
    <script src='{{ url_for('static', filename = 'jquery.min.js') }}' type='text/javascript'></script>
    <script src='{{ url_for('static', filename = 'common.js') }}' type='text/javascript'></script>
    <script src='{{ url_for('static', filename = 'vue.min.js') }}' type='text/javascript'></script>
    <script src='{{ url_for('static', filename = 'axios.min.js') }}' type='text/javascript'></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>

</head>

<body>

<div id="swagger-ui">
    <div data-reactroot="" class="swagger-ui">
        <div>
            <div class="information-container wrapper">
                <section class="block col-12">
                    <div class="info">
                        <hgroup class="main">
                            <h2 class="title">NHN Diquest ML/DL REST API Tester
                                <small>
                                    <pre class="version">0.1</pre>
                                </small>
                            </h2>
                        </hgroup>
                    </div>
                </section>
            </div>
            <div class="wrapper">
                <section class="block col-12 block-desktop col-12-desktop">
                    <div>
                        <div class="opblock-tag-section is-open">
                            <h4 class="opblock-tag" id="operations-tag-HTTP_Methods">
                                <a class="nostyle" href="#/HTTP Methods"><span>HTTP Methods</span></a>
                                <small>
                                    <div class="markdown">Testing ML/DL Algorithm HTTP</div>
                                </small>
                                <div></div>
                                <button class="expand-operation" title="Collapse operation">
                                    <svg class="arrow" width="20" height="20">
                                        <use href="#large-arrow-down" xlink:href="#large-arrow-down"></use>
                                    </svg>
                                </button>
                            </h4>
                            <div style="height: auto; border: none; margin: 0px; padding: 0px;">
                                <div class="opblock opblock-delete is-open" id="operations-HTTP Methods-delete_delete">
                                    <div class="opblock-summary opblock-summary-delete get_opblock">
                                        <span class="opblock-summary-method">Classifier</span>
                                        <span class="opblock-summary-path"><a class="nostyle" href="#/operations/HTTP Methods/delete_delete"><span>/classifier/{algorithm}</span></a></span>
                                        <div class="opblock-summary-description">The request's GET parameters.</div>
                                    </div>
                                    <div class="get_opblock-body" style="height: auto; border: none; margin: 0px; padding: 0px;">
                                        <div class="opblock-body">
                                            <div class="responses-wrapper">
                                                <div class="opblock-section-header">
                                                    <h4>Responses</h4>
                                                    <button class="btn try-out__btn classifier_upload" style="margin-right: 10px; padding: 5px 10px;">File Upload</button>
                                                    <label><span>Response content type</span>
                                                        <div class="content-type-wrapper execute-content-type">
                                                            <select class="content-type classifier_sb">
                                                                <option value="bagging">BaggingClassfier</option>
                                                                <option value="bernoulinb">BernouliNB</option>
                                                                <option value="decisiontree">DecisionTreeClassifier</option>
                                                                <option value="extratree">ExtraTreeClassifier</option>
                                                                <option value="extratrees">ExtraTreesClassifier</option>
                                                                <option value="gaussiannb">GaussianNB</option>
                                                                <option value="gaussianprocess">
                                                                    GaussianProcessClassifier(Only Model)
                                                                </option>
                                                                <option value="gradientboosting">
                                                                    GradientBoostingClassifier
                                                                </option>
                                                                <option value="kneighbors">KNeighborsClassifier</option>
                                                                <option value="linearsvc">LinearSVC</option>
                                                                <option value="logisticregression">LogisticRegression
                                                                </option>
                                                                <option value="mlp">MLPClassfier</option>
                                                                <option value="nusvc">NuSVC</option>
                                                                <option value="perceptron">Perceptron</option>
                                                                <option value="randomforest">RandomForestClassfier</option>
                                                                <option value="sgd">SGDClassfier</option>
                                                                <option value="svc">SVC</option>
                                                            </select>
                                                            <button class="btn try-out__btn classifier_execute">Execute</button>
                                                        </div>
                                                    </label>
                                                </div>
                                                <div class="responses-inner">
                                                    <div>
                                                        <div>
                                                            <div>
                                                                <h4>Curl</h4>
                                                                <div class="copy-paste">
                                                                    {#                                                                    <textarea readonly="" class="curl" style="white-space: normal;">curl -X GET "http://httpbin.org/get" -H "accept: application/json"</textarea>#}
                                                                    <textarea readonly="" class="curl classifier_curl" style="white-space: normal;"></textarea>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <h4>Request URL</h4>
                                                                <div class="request-url">
                                                                    <pre class="classifier_req_url"></pre>
                                                                </div>
                                                            </div>
                                                            <h4>Server response</h4>
                                                            <table class="responses-table">
                                                                <thead>
                                                                <tr class="responses-header">
                                                                    <td class="col col_header response-col_status">Status Code</td>
                                                                    <td class="col col_header response-col_description">
                                                                        Details
                                                                    </td>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr class="response">
                                                                    <td class="col response-col_status class_fier_status_code">
                                                                    </td>
                                                                    <td class="col response-col_description">
                                                                        <div>
                                                                            <h5>Algorithm Name</h5>
                                                                            <div class="highlight-code">
                                                                            <pre class="microlight class_fier_name"><span
                                                                                    style="color: #555;"></span></pre>
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Category</h5>
                                                                            <pre><span class="headerline class_fier_category"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Score</h5>
                                                                            <pre><span class="headerline class_fier_score"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Cross Validation Score</h5>
                                                                            <pre><span class="headerline class_fier_cv_score"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Data Response Succeed</h5>
                                                                            <pre><span class="headerline class_fier_succeed"></span></pre>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <h4>Responses</h4>
                                                    </div>
                                                    <table class="responses-table">
                                                        <thead>
                                                        <tr class="responses-header">
                                                            <td class="col col_header response-col_status">Status Code</td>
                                                            <td class="col col_header response-col_description">
                                                                Request Date
                                                            </td>

                                                        </tr>
                                                        </thead>

                                                        <tbody>
                                                        <tr class="response response_current">
                                                            <td class="col response-col_status class_fier_status_code">
                                                            </td>
                                                            <td class="col response-col_description">
                                                                <div class="response-col_description__inner">
                                                                    <div class="markdown class_fier_req_time">
                                                                        <p></p>
                                                                    </div>
                                                                </div>
                                                                <div class="response-content-type">
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="opblock opblock-get is-open" id="operations-HTTP Methods-get_get">
                                    <div class="opblock-summary opblock-summary-get post_opblock">
                                        <span class="opblock-summary-method">Regression</span>
                                        <span class="opblock-summary-path"><a class="nostyle" href="#/operations/HTTP Methods/get_get"><span>/regression/{algorithm}</span></a></span>
                                        <div class="opblock-summary-description">The request’s GET parameters.</div>
                                    </div>
                                    <div class="post_opblock-body" id="regression_ready" style="height: auto; border: none; margin: 0px; padding: 0px;">
                                        <div class="opblock-body">
                                            <div class="responses-wrapper">
                                                <div class="opblock-section-header">
                                                    <h4>Responses</h4>
                                                    <button class="btn try-out__btn regression_upload" style="margin-right: 10px; padding: 5px 10px;">File Upload</button>
                                                    <label><span>Response content type</span>
                                                        <div class="content-type-wrapper execute-content-type">
                                                            <select class="content-type regression_sb">
                                                                <option value="ard">ARDRegression(Only Model)</option>
                                                                <option value="bagging">BaggingRegressor</option>
                                                                <option value="cca">CCA</option>
                                                                <option value="decisiontree">DecisionTreeRegressor</option>
                                                                <option value="extratree">ExtraTreeRegressor</option>
                                                                <option value="extratrees">ExtraTreesRegressor</option>
                                                                <option value="gaussianprocess">GaussianProcessRegssor</option>
                                                                <option value="gradientboosting">GradientBoostingRegssor</option>
                                                                <option value="kernelridge">KernelRidge</option>
                                                                <option value="lars">Lars</option>
                                                                <option value="larscv">LarsCV</option>
                                                                <option value="lasso">Lasso</option>
                                                                <option value="lassocv">LassoCV</option>
                                                                <option value="linear">LinearRegression</option>
                                                                <option value="linearsvr">LinearSVR</option>
                                                                <option value="mlp">MLPRegressor</option>
                                                                <option value="nusvr">NuSVR</option>
                                                                <option value="ransac">RANSACRegressor</option>
                                                                <option value="randomforest">RandomForestRegressor</option>
                                                                <option value="ridge">Ridge</option>
                                                                <option value="ridgecv">RidgeCV</option>
                                                                <option value="sgd">SGDRegressor</option>
                                                                <option value="svr">SVR</option>
                                                            </select>
                                                            <button class="btn execute opblock-control__btn regression_execute" v-on:click="regression_analyze"> Execute</button>
                                                        </div>
                                                    </label>
                                                </div>
                                                <div class="responses-inner">
                                                    <div>
                                                        <div>
                                                            <div>
                                                                <h4>Curl</h4>
                                                                <div class="copy-paste">
                                                                <textarea readonly="" class="curl"
                                                                          style="white-space: normal;"></textarea>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <h4>Request URL</h4>
                                                                <div class="request-url">
                                                                    <pre></pre>
                                                                </div>
                                                            </div>
                                                            <h4>Server response</h4>
                                                            <table class="responses-table">
                                                                <thead>
                                                                <tr class="responses-header">
                                                                    <td class="col col_header response-col_status">Status Code</td>
                                                                    <td class="col col_header response-col_description">
                                                                        Details
                                                                    </td>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr class="response">
                                                                    <td class="col response-col_status">
                                                                    </td>
                                                                    <td class="col response-col_description">
                                                                        <div>
                                                                            <h5>Algorithm Name</h5>
                                                                            <div class="highlight-code">
                                                                                <pre class=" microlight"><span style="color: #555;"></span></pre>
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Category</h5>
                                                                            <pre><span class="headerline"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Score</h5>
                                                                            <pre><span class="headerline"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Cross Validation Score</h5>
                                                                            <pre><span class="headerline"></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Regression Result</h5>
                                                                            <pre><span class="headerline"><canvas id="myChart" width="800" height="400"></canvas></span></pre>
                                                                        </div>
                                                                        <div>
                                                                            <h5>Data Response Succeed</h5>
                                                                            <pre><span class="headerline"></span></pre>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <h4>Responses</h4></div>
                                                    <table class="responses-table">
                                                        <thead>
                                                        <tr class="responses-header">
                                                            <td class="col col_header response-col_status">Status Code</td>
                                                            <td class="col col_header response-col_description">
                                                                Request Date
                                                            </td>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr class="response response_current">
                                                            <td class="col response-col_status"></td>
                                                            <td class="col response-col_description">
                                                                <div class="response-col_description__inner">
                                                                    <div class="markdown">
                                                                    </div>
                                                                </div>
                                                                <div class="response-content-type">
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>

<script>
    // get
    $('.get_opblock').parent().removeClass("is-open");
    $(".get_opblock-body").css("display", "none");
    $(".get_opblock").click(function () {
        if ($('.get_opblock').parent().hasClass("is-open")) {
            $('.get_opblock').parent().removeClass("is-open");
            $(".get_opblock-body").css("display", "none");
        } else {
            $('.get_opblock').parent().addClass("is-open");
            $(".get_opblock-body").css("display", "block");
        }
    });

    $(".classifier_execute").click(function () {
        $(".classifier_curl").empty(); // Curl
        $(".classifier_req_url").empty(); // Request URL
        $(".class_fier_name").empty(); // Algorithm Name
        $(".class_fier_category").empty(); // Category
        $(".class_fier_score").empty(); // Score
        $(".class_fier_cv_score").empty(); // cv_score
        $(".class_fier_succeed").empty();  // Data Response Succeed
        for (var i = 0; i < $(".class_fier_status_code").length; i++) { // Status Code
            $(".class_fier_status_code")[i].innerText = "";
        }
        $(".class_fier_req_time").empty(); // Request DateResponse content type

        $.ajax({
            url: '/classifier/' + $(".classifier_sb").val(),
            type: 'get',
            contentType: "application/json",
            dataType: "json",
            success: function (result, textStauts, jqXHR) {
                $(".classifier_curl").html('curl -X ' + this.type + ' "' + "http://localhost:8000" + this.url + '" -H "accept: ' + this.contentType + '"'); // Curl
                $(".classifier_req_url").html("http://localhost:8000" + this.url); // Request URL
                $(".class_fier_name").html(result.name); // Algorithm Name
                $(".class_fier_category").html(result.category); // Category
                $(".class_fier_score").html(result.score); // Score
                for (var i = 0; i < result.cv_score.length; i++) { // cv_score
                    $(".class_fier_cv_score").append(result.cv_score[i] + "<br>");
                }
                $(".class_fier_succeed").html(result.success); // Data Response Succeed
                for (var i = 0; i < $(".class_fier_status_code").length; i++) { // Status Code
                    $(".class_fier_status_code")[i].innerText = jqXHR.status;
                }
                $(".class_fier_req_time").html(Common.Date.getReq_time(result.req_time, ".")); // Request Date
            },
            error: function (e) {
                console.log("error: ", e);
            }
        })
    })

    // post
    $('.post_opblock').parent().removeClass("is-open");
    $(".post_opblock-body").css("display", "none");
    $(".post_opblock").click(function () {
        if ($('.post_opblock').parent().hasClass("is-open")) {
            $('.post_opblock').parent().removeClass("is-open");
            $(".post_opblock-body").css("display", "none");
        } else {
            $('.post_opblock').parent().addClass("is-open");
            $(".post_opblock-body").css("display", "block");
        }
    });

    let regression_execute = new Vue({
        el: '#regression_ready'
        , data: {
            result_set: []
        }, methods: {
            regression_analyze: function () {
                axios.get('/regression/' + $(".regression_sb").val()).then(response => {
                    console.log("response: ", response)
                    let category = response.data.category
                    let cv_score = response.data.cv_score
                    let name = response.data.name
                    let pre_data = response.data.pre_data
                    let req_time = response.data.req_time
                    let score = response.data.score
                    console.log(response);
                    $("#regression_ready .microlight").text(name);
                    $("#regression_ready .headerline").each(function (index, item) {
                        if (index == 0) {
                            $(item).text(category);
                        } else if (index == 1) {
                            $(item).text(score);
                        } else if (index == 2) {
                            $(item).text(cv_score);
                        } else if (index == 3) {
                            regression_chart(pre_data);
                        } else if (index == 4) {
                            $(item).text("True");
                        }
                    });
                    $("#regression_ready .markdown").html("<p>" + Common.Date.getReq_time(req_time, ".") + "</p>");
                    $("#regression_ready textarea").text('curl -X POST "' + response.request.responseURL + ' -H "accept: application/json"');
                    $("#regression_ready .request-url pre").text(response.request.responseURL);
                    $("#regression_ready .response .response-col_status").html("<b>" + response.request.status + "</b>");
                });
            }
        }
    });

    function regression_chart(pre_data) {
        let label_list = new Array();
        let background_list = new Array();
        let bordercolor_list = new Array();

        for (var i = 0; i < pre_data.length; i++) {
            if (i % 50 == 0) {
                label_list.push(i);
            } else {
                label_list.push('');
            }
            background_list.push('rgba(255, 99, 132, 0.2)');
            bordercolor_list.push('rgba(255,99,132,1)');
        }
        var ctx = $("#myChart");

        $("#myChart").css('background', 'white');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: label_list,
                datasets: [{
                    label: '2018 Temperature Prediction',
                    data: pre_data,
                    backgroundColor: background_list,
                    borderColor: bordercolor_list,
                    borderWidth: 1
                }]
            },
            options: {
                legend: {
                    display: true
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    }
</script>

</body>

</html>